<div id="patient-container">
    <form id="patient-form" (ngSubmit)="savePatient()" [formGroup]="patientInfo">
        <div class="patient-buttons">
            <button class="secondary-button" [disabled]="registerMode">Editar</button>
            <button class="danger-button" [disabled]="registerMode">Deletar</button>
            <button class="primary-button">Salvar</button>

            <!-- Durante o cadastro, os botões de editar e deletar devem ficar desativados (desabilitados). -->

        </div>
        <div id="patient-inputs">

            <div class="form-unit">
                <label for="patient-name">Nome completo:</label>
                <input id="patient-name" name="patient-name" type="text" formControlName="name" required [ngClass]="{'error-border': (patientInfo.controls.name.dirty ||
        patientInfo.controls.name.touched) &&
        patientInfo.controls.name.errors}" />
                <span class="error-message" *ngIf="(patientInfo.controls.name.dirty ||
            patientInfo.controls.name.touched) &&
            patientInfo.controls.name.errors &&
            patientInfo.controls.name.errors['required']">Preencha o nome</span>
                <span class="error-message" *ngIf="(patientInfo.controls.name.dirty &&
            patientInfo.controls.name.touched) &&
            patientInfo.controls.name.errors &&
            patientInfo.controls.name.errors['minlength']">Preencha o nome completo da pessoa paciente</span>
                <span class="error-message" *ngIf="(patientInfo.controls.name.dirty ||
            patientInfo.controls.name.touched) &&
            patientInfo.controls.name.errors &&
            patientInfo.controls.name.errors['maxlength']">Este campo não pode ultrapassar 64 caracteres</span>
            </div>
            <div class="form-unit">
                <label for="patient-gender">Gênero:</label>
                <select id="patient-gender" name="patient-gender" formControlName="gender" required [ngClass]="{'error-border': (patientInfo.controls.gender.dirty ||
patientInfo.controls.gender.touched) &&
patientInfo.controls.gender.errors}">
                    <option value="male">Masculino</option>
                    <option value="female">Feminino</option>
                    <option value="other">Outro</option>
                    <option value="prefer-not">Prefiro não informar</option>
                </select>
            </div>
            <div class="form-unit">

                <label for="patient-birthdate">Data de nascimento <em>(dd/mm/aaaa)</em>:</label>
                <input id="patient-birthdate" name="patient-birthdate" type="text" formControlName="birthDate" required
                    [ngClass]="{'error-border': (patientInfo.controls.birthDate.dirty ||
        patientInfo.controls.birthDate.touched) &&
        patientInfo.controls.birthDate.errors}" />
            </div>

            <div class="form-unit">
                <!-- CPF: Obrigatório com o formato 000.000.000-00 -->
                <label for="patient-cpf">CPF:</label>
                <input id="patient-cpf" name="patient-cpf" type="text" formControlName="cpf" required
                    (input)="formatCpf()" placeholder="000.000.000-00" [ngClass]="{'error-border': (patientInfo.controls.cpf.dirty ||
                    patientInfo.controls.cpf.touched) &&
                    patientInfo.controls.cpf.errors}" />
            </div>
            <div class="form-unit">

                <label for="patient-rg">RG com órgão expeditor:</label>
                <input id="patient-rg" name="patient-rg" type="text" formControlName="rg" required [ngClass]="{'error-border': (patientInfo.controls.rg.dirty ||
        patientInfo.controls.rg.touched) &&
        patientInfo.controls.rg.errors}" />
            </div>
            <div class="form-unit">

                <label for="patient-marital-status">Estado civil:</label>
                <select id="patient-marital-status" name="patient-marital-status" formControlName="maritalStatus"
                    required [ngClass]="{'error-border': (patientInfo.controls.maritalStatus.dirty ||
patientInfo.controls.maritalStatus.touched) &&
patientInfo.controls.maritalStatus.errors}">
                    <option value="male">Nunca casou</option>
                    <option value="female">Casou</option>
                    <option value="other">Separou</option>
                    <option value="prefer-not">Divorciou</option>
                    <option value="prefer-not">Viuvou</option>
                </select>
            </div>
            <div class="form-unit">

                <!-- Telefone: Obrigatório com o formato (99) 9 9999-99999 -->
                <label for="patient-phone">Telefone:</label>
                <input id="patient-phone" name="patient-phone" type="text" formControlName="phone" required [ngClass]="{'error-border': (patientInfo.controls.phone.dirty ||
  patientInfo.controls.phone.touched) &&
  patientInfo.controls.phone.errors}" />

            </div>
            <div class="form-unit">
                <label for="patient-email">E-mail:</label>
                <input id="patient-email" name="patient-email" type="text" formControlName="email" />
            </div>
            <div class="form-unit">
                <!-- Naturalidade: Obrigatório, com máximo e mínimo de 64 e 8 caracteres, respectivamente -->
                <label for="patient-birth-city">Naturalidade:</label>
                <input id="patient-birth-city" name="patient-birth-city" type="text" formControlName="birthCity"
                [ngClass]="{'error-border': (patientInfo.controls.birthCity.dirty || patientInfo.controls.birthCity.touched) &&patientInfo.controls.birthCity.errors}" />
            </div>
            <div class="form-unit">
                <!-- contato de emerg: Obrigatório com o formato (99) 9 9999-99999 -->
                <label for="patient-emergency-contact">Contato de Emergência:</label>
                <input id="patient-emergency-contact" name="patient-emergency-contact" type="text"
                    formControlName="emergencyContact" required 
                    [ngClass]="{'error-border': (patientInfo.controls.emergencyContact.dirty || patientInfo.controls.emergencyContact.touched) &&patientInfo.controls.emergencyContact.errors}"/>
            </div>
            <div class="form-unit">
                <label for="patient-alergies">Lista de Alergias:</label>
                <input id="patient-alergies" name="patient-alergies" type="text" formControlName="alergies" />
            </div>
            <div class="form-unit">
                <label for="patient-care">Lista de Cuidados Específicos:</label>
                <input id="patient-care" name="patient-care" type="text" formControlName="specialCare" />
            </div>
            <div class="form-unit">
                <label for="patient-insurance">Convênio:</label>
                <input id="patient-insurance" name="patient-insurance" type="text" formControlName="insuranceCompany" />
            </div>
            <div class="form-unit">
                <label for="patient-insurance-number">Número do Convênio:</label>
                <input id="patient-insurance-number" name="patient-insurance-number" type="text"
                    formControlName="insuranceNumber" />
            </div>
            <div class="form-unit">
                <label for="patient-insurance-expiration">Validade do Convênio:</label>
                <input id="patient-insurance-expiration" name="patient-insurance-expiration" type="text"
                    formControlName="insuranceExpiration" />
            </div>
            <div class="form-unit">
                <label for="patient-cep">CEP:</label>
                <input id="patient-cep" name="patient-cep" type="text" formControlName="cep"
                [ngClass]="{'error-border': (patientInfo.controls.cep.dirty || patientInfo.controls.cep.touched) &&patientInfo.controls.cep.errors}" />

                <button id="cep-button" type="button">Pesquisar CEP</button>
            </div>
            <div class="form-unit">
                <label for="address-street">Logradouro:</label>
                <input id="address-street" name="address-street" type="text" formControlName="addressStreet"
                [ngClass]="{'error-border': (patientInfo.controls.addressStreet.dirty || patientInfo.controls.addressStreet.touched) &&patientInfo.controls.addressStreet.errors}" />
            </div>
            <div class="form-unit">
                <label for="address-number">Número:</label>
                <input id="address-number" name="address-number" type="text" formControlName="addressNumber" />
            </div>
            <div class="form-unit">
                <label for="address-number">Complemento:</label>
                <input id="address-number" name="address-number" type="text" formControlName="addressComplement" />
            </div>
            <div class="form-unit">
                <label for="address-number">Bairro:</label>
                <input id="address-number" name="address-number" type="text" formControlName="addressNeighborhood" />
            </div>
            <div class="form-unit">
                <label for="address-number">Cidade:</label>
                <input id="address-number" name="address-number" type="text" formControlName="addressCity"
                [ngClass]="{'error-border': (patientInfo.controls.addressCity.dirty || patientInfo.controls.addressCity.touched) &&patientInfo.controls.addressCity.errors}" />
            </div>
            <div class="form-unit">
                <label for="address-number">Estado:</label>
                <input id="address-number" name="address-number" type="text" formControlName="addressState"
                [ngClass]="{'error-border': (patientInfo.controls.addressState.dirty || patientInfo.controls.addressState.touched) &&patientInfo.controls.addressState.errors}" />
            </div>
            <div class="form-unit">
                <label for="address-number">Ponto de Referência:</label>
                <input id="address-number" name="address-number" type="text" formControlName="addressReference" />
            </div>
        </div>
    </form>
</div>